(window.webpackJsonp=window.webpackJsonp||[]).push([["homePage"],{"02ed":function(e,t,a){"use strict";a.r(t);var o,n=a("c7eb"),i=(a("96cf"),a("1da1")),r=a("5530"),s=(a("7f7f"),a("2909")),c=(a("20d6"),a("6b54"),a("a481"),a("ade3")),l=(a("ac6a"),a("7514"),a("d4ec")),d=a("bee2"),u=a("257e"),p=a("262e"),v=a("2caf"),h=a("bc3a"),f=a.n(h),m=a("3a80"),g=a("778c");Object({NODE_ENV:"production",VUE_APP_BASE_URL:"http://192.168.1.127:10001",VUE_APP_ENV_PATH_PREFIX:"pyx/api",VUE_APP_PROJECT_COPYRIGHT:"Heidelberg Graphics (Beijing) Company Limited",VUE_APP_PROJECT_ENV:"pyx",VUE_APP_PROJECT_LOGIN_PAGE_TITLE:"",VUE_APP_PROJECT_SYSTEM_NAME:"淄博鹏宇祥包装印务有限公司",VUE_APP_PROJECT_SYSTEM_NAME_ABBR:"淄博鹏宇祥",VUE_APP_PROJECT_SYSTEM_NAME_ALIAS:"",BASE_URL:""}).VUE_APP_HOST||"".concat(location.protocol,"//").concat(location.hostname,":").concat(location.port,"/"),o="http://192.168.1.127:10001",console.log(">>>baseUrl<<<",Object({NODE_ENV:"production",VUE_APP_BASE_URL:"http://192.168.1.127:10001",VUE_APP_ENV_PATH_PREFIX:"pyx/api",VUE_APP_PROJECT_COPYRIGHT:"Heidelberg Graphics (Beijing) Company Limited",VUE_APP_PROJECT_ENV:"pyx",VUE_APP_PROJECT_LOGIN_PAGE_TITLE:"",VUE_APP_PROJECT_SYSTEM_NAME:"淄博鹏宇祥包装印务有限公司",VUE_APP_PROJECT_SYSTEM_NAME_ABBR:"淄博鹏宇祥",VUE_APP_PROJECT_SYSTEM_NAME_ALIAS:"",BASE_URL:""}).VUE_APP_PROXY),Object({NODE_ENV:"production",VUE_APP_BASE_URL:"http://192.168.1.127:10001",VUE_APP_ENV_PATH_PREFIX:"pyx/api",VUE_APP_PROJECT_COPYRIGHT:"Heidelberg Graphics (Beijing) Company Limited",VUE_APP_PROJECT_ENV:"pyx",VUE_APP_PROJECT_LOGIN_PAGE_TITLE:"",VUE_APP_PROJECT_SYSTEM_NAME:"淄博鹏宇祥包装印务有限公司",VUE_APP_PROJECT_SYSTEM_NAME_ABBR:"淄博鹏宇祥",VUE_APP_PROJECT_SYSTEM_NAME_ALIAS:"",BASE_URL:""}).VUE_APP_HDBDEVICE_BASE_URL;var b="".concat(o).concat(g.apiContextPath),_=a("cff8"),P=a.n(_),k=f.a.create({baseURL:b,withCredentials:!0,crossDomain:!0,data:{},params:{},headers:{"Content-Type":"application/json; charset=utf-8"}}),w=f.a.create({baseURL:b,withCredentials:!0,crossDomain:!0,params:{},headers:{"Content-Type":"multipart/form-data"}}),y=f.a.create({baseURL:b,withCredentials:!0,crossDomain:!0,params:{},responseType:"blob",onUploadProgress:function(e){}}),D=function(e){var t=Object(r.a)({},e.params);return e.params=Object(r.a)(Object(r.a)({},t),{},{_t:+new Date}),e.headers.authorization||(e.headers.authorization=P.a.get("token")),e},E=function(e){return Promise.reject(e)},O=function(e){var t=e.code||e.data.code,a=e.message||e.data.message||e.msg||e.data.msg;return 200!=e.status?Promise.reject({code:t,message:a}):2e3==t||200==t||1==t?Promise.resolve(e.data):Promise.reject({code:t,message:a})},T=function(e){var t=e.response;if(t){var a=t.data.code,o=t.data.message;return Promise.reject({code:a,message:o})}};k.interceptors.request.use(D,E),k.interceptors.response.use(O,T),w.interceptors.request.use(D,E),w.interceptors.response.use(O,T),y.interceptors.request.use(D,E);var j=function(e,t){var a=e.code,o=e.message;if(console.error(">>>接口出错<<<",e),-1==a)P.a.remove("token"),window.location.replace("#/login");else{if(t||!o)return;m.a.error(o)}},C=function(e,t,a,o){return e(t,a).then((function(e){return Promise.resolve(e)})).catch((function(e){return j(e,o),Promise.reject(e)}))},S=function(e,t,a){return C(k,e,t,a)},A=f.a.create({withCredentials:!0,crossDomain:!0,data:{},params:{},headers:{"Content-Type":"application/json; charset=utf-8"}}),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=Object(r.a)(Object(r.a)({},t),{},{baseURL:b});return A(e,o).then((function(e){return Promise.resolve(e)})).catch((function(e){return j(e,a),Promise.reject(e)}))},L=Object(d.a)((function e(t){var a=this;Object(l.a)(this,e),Object(c.a)(this,"create",(function(e){return S(a.module.api.create,{method:"post",data:e})})),Object(c.a)(this,"remove",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",o={};return o[t]=e,S(a.module.api.remove,{method:"post",data:o})})),Object(c.a)(this,"update",(function(e){return S(a.module.api.update,{method:"post",data:e})})),Object(c.a)(this,"getAll",(function(){return S(a.module.api.getAll,{method:"post"})})),Object(c.a)(this,"getPageList",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2?arguments[2]:void 0,n=Object(r.a)({pageBo:{page:e,pageSize:t}},o);return S(a.module.api.getPageList,{method:"post",data:n})})),Object(c.a)(this,"getDetail",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",o={};return o[t]=e,S(a.module.api.detail,{method:"post",data:o})})),this.service=S,this.module=t})),B=a("428c"),I=new(function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var o;return Object(l.a)(this,a),o=t.call(this,e),Object(c.a)(Object(u.a)(o),"getDetail",(function(e){var t={machineCode:e};return o.service(o.module.api.detail,{method:"post",data:t}).then((function(t){var a=t.data.list,o={};return Array.isArray(a)&&a.length&&(o=a.find((function(t){return t.machineCode==e}))),o}))})),Object(c.a)(Object(u.a)(o),"getDevicesByWorkDetails",(function(e,t){var a={workDetailIds:e};return o.service(o.module.api.getDevicesByWorkDetails,{method:"post",data:a}).then((function(e){var a={};return(e.data||[]).forEach((function(e){var o=t.find((function(t){return t.machineName==e.machineName}));o&&(e.machineCode=o.machineCode),a[e.workDetailId]=e})),a}))})),o}return Object(d.a)(a,[{key:"demo",value:function(e){return this.service(this.module.api.demo,{method:"post",data:e})}},{key:"getDevicesByType",value:function(e){var t={machineCategoryCode:e};return this.service(this.module.api.getDevicesByType,{method:"post",data:t})}}]),a}(L))(B.a),R=a("af25"),M=new(function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var o;return Object(l.a)(this,a),o=t.call(this,e),Object(c.a)(Object(u.a)(o),"getPrintDeviceStatus",(function(e,t,a){console.log(e,t,a);var n={date:e,deviceId:t,currentPage:a,pageSize:30};return x(o.module.api.getPrintDeviceStatus,{method:"get",params:n})})),Object(c.a)(Object(u.a)(o),"getPrintDeviceLogs",(function(e){var t={jobId:e};return x(o.module.api.getPrintDeviceLogs,{method:"get",params:t})})),o}return Object(d.a)(a)}(L))(R.a),U={108e3:{k:108e3,v:"启动机器运行"},108001:{k:108001,v:"停止机器运行"},108002:{k:108002,v:"活件准备运行"},108003:{k:108003,v:"停止活件准备"},200047:{k:200047,v:"开始清洗橡皮布"},200048:{k:200048,v:"停止清洗橡皮布"},200045:{k:200045,v:"开始清洗压印滚筒"},200046:{k:200046,v:"停止清洗压印滚筒"},200049:{k:200049,v:"开始清洗墨辊"},200050:{k:200050,v:"停止清洗墨辊"},108004:{k:108004,v:"开发激活飞达"},108005:{k:108005,v:"停止激活飞达"},108006:{k:108006,v:"开始纸张运行"},108007:{k:108007,v:"停止纸张运行"},108008:{k:108008,v:"开始印刷"},108009:{k:108009,v:"停止印刷"},108010:{k:108010,v:"开始润版辊"},108011:{k:108011,v:"停止润版辊"},108012:{k:108012,v:"开始润版"},108013:{k:108013,v:"停止润版"},108014:{k:108014,v:"开始墨辊运行"},108015:{k:108015,v:"停止墨辊运行"},108016:{k:108016,v:"启动/停止摆墨辊"},108017:{k:108017,v:"停止摆墨辊"},108018:{k:108018,v:"开始合格印品计数"},108019:{k:108019,v:"停止合格印品计数"},200053:{k:200053,v:"开始清洗印版"},200054:{k:200054,v:"停止清洗印版"},200051:{k:200051,v:"开始清洗墨斗辊"},200052:{k:200052,v:"停止清洗墨斗辊"},200057:{k:200057,v:"启动纸张晚到（飞达前规没有咬到纸）"},200058:{k:200058,v:"停止纸张晚到（飞达前规没有咬到纸）"},200059:{k:200059,v:"启动纸张早到（飞达纸张超过前规位置）"},200060:{k:200060,v:"停止停止纸张早到（飞达纸张超过前规位置）"},200061:{k:200061,v:"启动未对齐的纸张"},200062:{k:200062,v:"停止停止未对齐的纸张"},200063:{k:200063,v:"启动双张"},200064:{k:200064,v:"停止双张"},200067:{k:200067,v:"启动侧规报警"},200068:{k:200068,v:"停止侧规报警"},200069:{k:200069,v:"启动进纸错误"},200070:{k:200070,v:"停止停止进纸错误"},200118:{k:200118,v:"启动印刷间隔"},200119:{k:200119,v:"停止印刷间隔"},108023:{k:108023,v:"新机器速度"},108024:{k:108024,v:"当前计数"},200041:{k:200041,v:"开始装版"},200042:{k:200042,v:"停止装版"},200110:{k:200110,v:"开机"},200001:{k:200001,v:"关机"},108029:{k:108029,v:"开始合格品印刷"},108030:{k:108030,v:"停止合格品印刷"},200201:{k:200201,v:"启动丢张（机组间纸张没传递到位）"},200202:{k:200202,v:"停止丢张（机组间纸张没传递到位）"},200203:{k:200203,v:"启动多张（飞达处走多张纸）"},200204:{k:200204,v:"停止多张（飞达处走多张纸）"},200221:{k:200221,v:"插页（收纸处的自动插页器（选配德国订））"},200205:{k:200205,v:"启动纸张超过飞达限位（纸张飞出去比如过厚过薄纸张）"},200206:{k:200206,v:"停止纸张超过飞达限位（纸张飞出去比如过厚过薄纸张）"},200207:{k:200207,v:"启动纸张超过收纸限位"},200208:{k:200208,v:"停止纸张超过收纸限位"},200220:{k:200220,v:"更换纸堆"},200017:{k:200017,v:"循环状态更新信息"},200095:{k:200095,v:"开始活件"},200096:{k:200096,v:"暂停活件"},200097:{k:200097,v:"结束活件"},200112:{k:200112,v:"登录助手"},200113:{k:200113,v:"登出助手"},200114:{k:200114,v:"操作员登录"},200115:{k:200115,v:"操作员登出"}};function V(e,t,a){var o=t||"k",n=a||"v";return function(t){var a={};for(var i in e)if(e[i][o]==t){a=e[i];break}return a[n]||""}}var Y={name:"PrintDevices",components:{},props:{list:{type:Array,default:function(){return[]}}},mixins:[],data:function(){return{}},computed:{},watch:{},created:function(){},filters:{hdbPrintDeviceEventFormat:function(e){return V(U)(e)}},methods:{}},N=a("2877"),$=Object(N.a)(Y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.list,stripe:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"id",prop:"id","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"运行时间",prop:"time","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"设备运行操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(e._f("hdbPrintDeviceEventFormat")(o.EventID)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备印刷速度",prop:"Speed","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"Status","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"活件ID",prop:"JobID","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[o.JobID?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.$emit("check",o)}}},[e._v("查看")]):e._e()]}}])})],1)}),[],!1,null,"546759c8",null).exports,J=a("2f62"),F=(a("6762"),a("2fdb"),{isSmall:!1,hasBackground:!0,pageSize:10,pagerCount:5,layout:"total, sizes, prev, pager, next, jumper",pageSizes:[5,10,15,20,30],prevText:"上一页",nextText:"下一页",hideOnSinglePage:!0}),H={data:function(){return{expandFilterForm:!1,listLoading:!1,list:[],total:0,pageCount:0,currentPage:1,pageConfig:Object(r.a)({},F),usedTableItems:[]}},created:function(){this.usedTableItems=this.tableItems},methods:{filterTableItem:function(e){return this.usedTableItems.includes(e)},handlerResetFilterForm:function(){this.$refs.filterForm.resetFields()},pageSizeChange:function(e){this.pageConfig.pageSize=e,this.getPageList()},currentPageChange:function(e){this.currentPage=e,this.getPageList()},handlerFilter:function(e){this.currentPage=1,this.getPageList&&this.getPageList(),this.getList&&this.getList()}}};a("34ef"),a("28a5"),a("55dd"),a("3b2b"),a("4917"),a("456d"),a("53ca"),a("5c96"),a("0b60");var z={name:"AresDialog",props:{title:{type:String},modal:{type:Boolean,default:!0},top:{type:String,default:"100px"},width:{type:String,default:"50%"},destroy:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},modalAppendToBody:{type:Boolean,default:!0}},mixins:[],data:function(){return{show:!1}},computed:{},watch:{},methods:{showDialog:function(){this.show=!0},hideDialog:function(){this.$emit("close"),this.show=!1}}},G=(a("d6bc"),{components:{AresDialog:Object(N.a)(z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-dialog",{staticClass:"ares-dialog",attrs:{title:e.title,visible:e.show,"destroy-on-close":e.destroy,"close-on-click-modal":e.closeOnClickModal,"append-to-body":e.appendToBody,modal:e.modal,top:e.top,width:e.width,"modal-append-to-body":e.modalAppendToBody},on:{"update:visible":function(t){e.show=t},close:function(t){return e.$emit("close")}}},[e.destroy?[e.show?e._t("default"):e._e()]:[e._t("default")]],2)}),[],!1,null,"b6b98cc0",null).exports},directives:{},props:{autoClose:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},top:{type:String,default:"10vh"},width:{type:String,default:"800px"},fullscreen:{type:Boolean,default:!1},destroy:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},center:{type:Boolean,default:!1},service:{type:Function},serviceQuery:{type:Object,default:function(){return{}}},serviceParams:{type:Object,default:function(){return{}}}},provide:{},inject:[],mixins:[H],data:function(){return{show:!1,selectedRows:[]}},computed:Object(r.a)({},Object(J.b)([])),methods:{pageQueryHandler:function(e,t,a,o,n){return t(a,o,n).then((function(t){return e.listLoading=!1,t.data.list,e.list=t.data.list,e.total=t.data.total,console.log(">>> ".concat(e.$route.name," <<<"),t),t})).catch((function(t){e.listLoading=!1}))},setEnableOrDisable:function(e,t){var a="string"==typeof t?t.split("|")[0]:"启用",o="string"==typeof t?t.split("|")[1]:"禁用";return'<b class="'.concat(e?"ares-text-success":"ares-text-danger",'">').concat(e?a:o,"</b>")},constantFilter:V,showDialog:function(){this.getPageList()},hideDialog:function(){this.$refs.aresDialog.hideDialog()},handlerSelectionChange:function(e){this.selectedRows=e},handlerSubmitSingle:function(e){this.$emit("single",e),this.autoClose&&this.$refs.aresDialog.hideDialog()},handlerSubmitMultiple:function(){this.selectedRows.length?(this.$emit("multiple",this.selectedRows),this.autoClose&&this.$refs.aresDialog.hideDialog()):this.$message.error("请选择数据")}}}),q={name:"PrintDeviceDetails",components:{},directives:{},props:{device:{type:Object,default:function(){}}},provide:{},inject:[],mixins:[G],data:function(){return{list:[]}},watch:{},computed:{},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},filters:{},methods:{showDialog:function(){var e=this;this.$refs.aresDialog.showDialog(),this.$nextTick((function(){e.getInfo()}))},getInfo:function(){var e=this;console.log(this.device),M.getPrintDeviceLogs(this.device.JobID).then((function(t){console.log(t),e.list=t.data.worksteps||[]}))}}};function W(e){var t=e.toString();return 1==t.length?"0"+t:t}function X(e){"string"==typeof e&&(e=e.replace(/-/g,"/"));var t=new Date(e);return{date:[t.getFullYear(),t.getMonth()+1,t.getDate()],time:[t.getHours(),t.getMinutes(),t.getSeconds()]}}a("99ef");var Q,K={name:"PrintStatus",components:{PrintDevices:$,Details:Object(N.a)(q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AresDialog",{ref:"aresDialog",attrs:{title:"印刷活件详情",destroy:e.destroy,closeOnClickModal:e.closeOnClickModal,appendToBody:e.appendToBody,modalAppendToBody:e.modalAppendToBody,top:e.top,modal:e.modal,center:e.center,fullscreen:e.fullscreen},on:{close:function(t){return e.$emit("close")}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"table",attrs:{data:e.list,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"活件ID",prop:"jobId","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"计划印刷数",prop:"amountPlanned",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"实际印刷数",prop:"amountProduced",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"计划废张数",prop:"wastePlanned",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"实际废张数",prop:"wasteProduced",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"设备名称","show-overflow-tooltip":""}},[[e._v("\n                "+e._s(e.device.machineName)+"\n            ")]],2),e._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"start",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",prop:"end",width:"120","show-overflow-tooltip":""}})],1)],1)}),[],!1,null,"47799f28",null).exports},mixins:[],data:function(){return{formdata:{workDate:new Date},printingDevices:[],activeTab:"",currentDevice:{},findDeviceIdx:0,dataFlag:null,nowTime:"",commonDevice:""}},computed:{},watch:{},mounted:function(){this.nowTime=this.formatDateTime(new Date,"YYYY-MM-DD")},created:function(){this.getPrintingDevices()},filters:{},methods:{searchTotal:function(){var e,t={date:this.nowTime,deviceId:this.commonDevice};this.$router.push((e={name:"/jumpList"},Object(c.a)(e,"name","jumpList"),Object(c.a)(e,"params",t),e))},activeTotal:function(){var e,t={date:this.nowTime,deviceId:this.commonDevice};this.$router.push((e={name:"/activeTotal"},Object(c.a)(e,"name","activeTotal"),Object(c.a)(e,"params",t),e))},formatDateTime:function(e,t){if(e){"string"==typeof e&&(e=e.replace(/-/g,"/"));var a=(e=new Date(Date.parse(e))).getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var n=e.getDate();n=n<10?"0"+n:n;var i=e.getHours();i=i<10?"0"+i:i;var r=e.getMinutes();r=r<10?"0"+r:r;var s=e.getSeconds();return s=s<10?"0"+s:s,t||(t="YYYY-MM-DD hh:mm:ss"),(t.indexOf("YYYY")>=0||t.indexOf("yyyy")>=0)&&(t=(t=t.replace(/YYYY/g,a)).replace(/yyyy/g,a)),t.indexOf("MM")>=0&&(t=t.replace(/MM/g,o)),(t.indexOf("DD")>=0||t.indexOf("dd")>=0)&&(t=(t=t.replace(/DD/g,n)).replace(/dd/g,n)),(t.indexOf("HH")>=0||t.indexOf("hh")>=0)&&(t=(t=t.replace(/hh/g,i)).replace(/HH/g,i)),t.indexOf("mm")>=0&&(t=t.replace(/mm/g,r)),(t.indexOf("SS")>=0||t.indexOf("ss")>=0)&&(t=(t=t.replace(/ss/g,s)).replace(/SS/g,s)),t}return""},beforeLeave:function(e){if("CustoBtn"==e)return!1},toPubPage:function(){this.$router.push("/equipmentList")},toWorkerPage:function(){this.$router.push("/workerList")},getPrintingDevices:function(){var e=this;I.getDevicesByType("2").then((function(t){var a=t.data||[],o="";a.map((function(e){e.details=[],e.finished=!1,e.dataReady=!1,e.currentPage=1,e.recordCount=0,e.factoryId&&(o=e.factoryId.toString())})),e.printingDevices=a,e.activeTab=o,e.commonDevice=o}))},handlerChangeDate:function(){this.nowTime=this.formatDateTime(this.formdata.workDate,"YYYY-MM-DD")},getList:function(e){var t=this,a=this.printingDevices.findIndex((function(e){return e.factoryId==t.activeTab}));if(-1!=a){var o=this.printingDevices[a];if(e||(o.dataReady=!1,o.finished=!1,o.currentPage=1),!o.finished){var n=this.$loading({lock:!0,text:"数据拼命加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});M.getPrintDeviceStatus(function(e,t){if(!e)return"未知";for(var a=[],o=void 0===t?"-":t,n=X(e),i=0;i<n.date.length;i++)a.push(W(n.date[i]));return a.join(o)}(this.formdata.workDate),this.activeTab,o.currentPage).then((function(a){t.dataFlag=a.data.SignalStatus,o.dataReady=!0;var n=a.data.SignalStatus||[],i=a.data.recordCount||0;o.details=e?[].concat(Object(s.a)(o.details),Object(s.a)(n)):n,o.currentPage+=1,o.recordCount=i,n.length||(o.finished=!0)})).finally((function(){n.close()}))}}},handlerChangeTab:function(e){this.commonDevice=e.name,this.findDeviceIdx=e.index},handlerCheck:function(e,t){this.currentDevice=Object(r.a)(Object(r.a)({},e),{},{machineName:t}),this.$refs.details.showDialog()},handleJump:(Q=Object(i.a)(Object(n.a)().mark((function e(t){var a,o,i,r,s,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),o=t.EventID,i=t.time,r=t.deviceId,e.next=6,f.a.get("/signalStatus/getStatisticsDate?date=".concat(i,"&deviceId=").concat(r,"&eventId=").concat(o));case 6:s=e.sent,l=s.data,this.$router.push((a={name:"/jumpList"},Object(c.a)(a,"name","jumpList"),Object(c.a)(a,"params",l),a));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)}),handlerGetMore:function(){this.getList(!0)}}},Z=(a("e9da"),Object(N.a)(K,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"deviceWrap",staticClass:"device-wrap"},[a("el-card",{staticClass:"page-header-card",attrs:{shadow:"hover"}},[a("b",[e._v(e._s(e.$route.meta.name))]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",model:e.formdata,"label-width":"80px"}},[a("el-form-item",{staticClass:"ares-mb-0",attrs:{label:"日期",prop:"workDate"}},[a("el-date-picker",{attrs:{type:"date",clearable:!1,editable:!1,placeholder:"选择日期"},on:{change:e.handlerChangeDate},model:{value:e.formdata.workDate,callback:function(t){e.$set(e.formdata,"workDate",t)},expression:"formdata.workDate"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"i-total"},[a("p",{staticStyle:{width:"150px","margin-top":"5px"}},[e._v("\n      deviceId: "+e._s(e.commonDevice)+"\n    ")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"},attrs:{size:"mini"},on:{click:function(t){return e.getList(!1)}}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini"},on:{click:e.searchTotal}},[e._v("今日统计")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini"},on:{click:e.activeTotal}},[e._v("今日活件统计")])],1),e._v(" "),a("el-card",{staticClass:"main-table-card"},[a("el-tabs",{attrs:{"before-leave":e.beforeLeave,type:"card"},on:{"tab-click":e.handlerChangeTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.printingDevices,(function(t,o){return t.factoryId?a("el-tab-pane",{key:o,attrs:{name:t.factoryId.toString(),label:t.machineName}},[a("div",{attrs:{slot:"label"},slot:"label"},[t.recordCount>0?a("el-badge",{attrs:{value:t.recordCount}},[a("span",[e._v(e._s(t.machineName))])]):a("span",[e._v(e._s(t.machineName))])],1),e._v(" "),a("PrintDevices",{attrs:{list:t.details},on:{check:function(a){return e.handlerCheck(a,t.machineName)},jump:function(t){return e.handleJump(t)}}}),e._v(" "),a("div",{staticClass:"ares-text-center"},[!t.finished&&t.dataReady?a("el-button",{attrs:{type:"text"},on:{click:e.handlerGetMore}},[e._v("\n            ---查看更多---\n          ")]):e._e()],1)],1):e._e()})),1)],1),e._v(" "),a("Details",{ref:"details",attrs:{device:e.currentDevice}}),e._v(" "),a("el-backtop",{staticClass:"ares-bg-primary",attrs:{target:".app-main>.el-scrollbar>.el-scrollbar__wrap>.el-scrollbar__view>.device-wrap",right:10,bottom:5}})],1)}),[],!1,null,"2877a102",null));t.default=Z.exports},8220:function(e,t,a){},"99ef":function(e,t,a){"use strict";a("8220")},d6bc:function(e,t,a){"use strict";a("e157")},d820:function(e,t,a){},e157:function(e,t,a){},e9da:function(e,t,a){"use strict";a("d820")}}]);